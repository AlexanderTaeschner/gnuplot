## Process this file with automake to produce Makefile.in -*-Makefile-*-
AUTOMAKE_OPTIONS = foreign 1.2h

EXTRA_DIST = README Makefile.am.in compact.c driver.h impcodes.h \
object.h post.h $(CORETERM) PostScript

# List of terminal drivers; must be created
# prior to running automake
##trm-files-begin
##trm-files-end

# For Unix and MSDOS only
install-data-local:
	$(mkinstalldirs) $(DESTDIR)$(GNUPLOT_PS_DIR)
	$(INSTALL_DATA) $(srcdir)/PostScript/*.ps $(DESTDIR)$(GNUPLOT_PS_DIR)

uninstall-local:
	@$(NORMAL_UNINSTALL)
	echo " rm -f $(DESTDIR)$(GNUPLOT_PS_DIR)/*.ps"
	rm -f $(DESTDIR)$(GNUPLOT_PS_DIR)/*.ps

Makefile.am: Makefile.am.in
	rm -f $@ $@t
	sed -n '1,/^##trm-files-begin/p' Makefile.am.in > $@t
	echo CORETERM = *.trm | fmt | (tr '\012' @; echo) \
	  |sed 's/@$$/%/;s/@/ \\@/g' | tr @% '\012 ' \
	  >> $@t
	sed -n '/^##trm-files-end/,$$p' Makefile.am.in >> $@t
	chmod a-w $@t
	mv $@t $@

